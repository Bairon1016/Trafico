<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Análisis de movilidad</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css" />
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css" />
    <link rel="stylesheet" href="./css/main.css" />
</head>
<body>
    <div class="wrapper">
        <header class="header-mobile">
            <h1 class="logo">Análisis de movilidad</h1>
            <button class="open-menu" id="open-menu">
                <i class="bi bi-list"></i>
            </button>
        </header>
        <aside>
            <button class="close-menu" id="close-menu">
                <i class="bi bi-x"></i>
            </button>
            <header>
                <h1 class="logo">Análisis de movilidad</h1>
            </header>
            <nav>
                <ul class="menu">
                    <li><button id="btn-dashboard" class="boton-menu boton-categoria active"><i class="bi bi-hand-index-thumb-fill"></i> Dashboard</button></li>
                    <li><button id="btn-simulacion" class="boton-menu boton-categoria"><i class="bi bi-cpu-fill"></i> Simulación Unity</button></li>
                    <li><button id="btn-powerbi" class="boton-menu boton-categoria"><i class="bi bi-bar-chart-fill"></i> Power BI Tipo/Accidente</button></li>
                    <li><button id="btn-powerbi-fecha" class="boton-menu boton-categoria"><i class="bi bi-calendar3"></i> Power BI Fecha</button></li>
                    <li><button id="btn-powerbi-localidad" class="boton-menu boton-categoria"><i class="bi bi-geo-alt-fill"></i> Power BI Localidad</button></li>
                </ul>
            </nav>
            <footer>
                <p class="texto-footer">© 2025 Análisis de movilidad</p>
                <p class="texto-footer">Devs: Bairon Martinez & Lorenzo Lotero</p>
            </footer>
        </aside>

        <main>
            <h2 class="titulo-principal" id="titulo-principal">Dashboard</h2>

            <!-- Contexto del problema (visible solo en Dashboard) -->
            <section class="seccion-contexto" id="contexto-problema">
                <h3>Contexto del Problema</h3>
                <p>
                    Bogotá enfrenta altos niveles de congestión y accidentes viales debido a la falta de infraestructura inteligente y datos en tiempo real. Esta situación limita la capacidad de las autoridades para tomar decisiones rápidas y efectivas en temas de movilidad y seguridad vial.
                </p>
                <h3>Simulación IoT</h3>
                <p>
                    Se desarrolló un modelo 3D en Unity que simula tramos viales de Bogotá con sensores IoT virtuales. Esta simulación permite observar cómo se recopilan datos de tráfico en diferentes escenarios críticos, apoyando el análisis y la validación de estrategias de intervención.
                </p>
                <p>
                    <strong>💡 Tip:</strong> Puedes acceder a la simulación interactiva desde el menú "Simulación Unity" para experimentar con el escenario de tráfico.
                </p>
                <h3>Objetivos de Negocio</h3>
                <ul>
                    <li>Optimizar la toma de decisiones para autoridades de movilidad.</li>
                    <li>Reducir costos y riesgos asociados a la accidentalidad vial.</li>
                    <li>Mejorar la eficiencia en la planificación urbana.</li>
                    <li>Promover ciudades más seguras y sostenibles, alineadas con los ODS.</li>
                </ul>
            </section>

            <!-- Dashboard original -->
            <section id="contenedor-productos" class="contenedor-productos"></section>

            <!-- Simulación Unity -->
            <section id="simulacion-container" style="display: none; margin-top: 1rem;">
                <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #007bff;">
                    <h3 style="color: #007bff; margin-bottom: 10px;">🚗 Simulación de Tráfico - Bogotá</h3>
                    <p style="margin-bottom: 15px; color: #555;">
                        La simulación incluye sensores IoT virtuales que recopilan datos en tiempo real.
                    </p>
                    <div style="background: #e3f2fd; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
                        <strong>Instrucciones:</strong>
                        <ul style="margin: 10px 0; padding-left: 20px;">
                            <li>Usa las teclas W-A-S-D o flechas para moverte</li>
                        </ul>
                    </div>
                </div>
                
                <div style="background: #fff; padding: 15px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                    <iframe 
                        src="https://play.unity.com/en/games/1b0fdfe7-6352-4c4c-84c8-321860e9f4bf/simulacion-trafico-bogota" 
                        width="100%" 
                        height="700px" 
                        frameborder="0"
                        allowfullscreen
                        style="border-radius: 8px; min-height: 600px;"
                        loading="lazy">
                    </iframe>
                </div>
                
                <div style="background: #f1f8e9; padding: 15px; border-radius: 5px; margin-top: 20px; border-left: 4px solid #4caf50;">
                    <p style="margin: 0; color: #2e7d32;">
                        <strong>💡 Nota:</strong> Esta simulación es parte integral del análisis de movilidad, 
                        proporcionando datos que alimentan los reportes de Power BI mostrados en las otras secciones.
                    </p>
                </div>
            </section>

            <!-- Power BI 1 -->
            <section id="powerbi-container" style="display: none; margin-top: 1rem; height: 800px;">
                <iframe
                    title="ProyectoBigData"
                    aria-label="Visualización general en Power BI"
                    width="100%"
                    height="100%"
                    src="https://app.powerbi.com/view?r=eyJrIjoiNTcxNTdkZTYtNzM0MS00ZjBlLThmNTctMDJlZDhiMWVkOGU2IiwidCI6IjA3ZGE2N2EwLTFmNDMtNGU4Yy05NzdmLTVmODhiNjQ3MGVlNiIsImMiOjR9"
                    frameborder="0"
                    allowFullScreen="true"
                ></iframe>
            </section>

            <!-- Power BI Fecha -->
            <section id="powerbi-fecha-container" style="display: none; margin-top: 1rem; height: 800px;">
                <iframe
                    title="ProyectoBD_Fecha"
                    aria-label="Visualización por fecha en Power BI"
                    width="100%"
                    height="100%"
                    src="https://app.powerbi.com/view?r=eyJrIjoiOTU1MmU4NGYtZGU4Ny00YzM5LWE4MGYtMDZmZTU2YjViMTg4IiwidCI6IjA3ZGE2N2EwLTFmNDMtNGU4Yy05NzdmLTVmODhiNjQ3MGVlNiIsImMiOjR9"
                    frameborder="0"
                    allowFullScreen="true"
                ></iframe>
            </section>

            <!-- Power BI Localidad -->
            <section id="powerbi-localidad-container" style="display: none; margin-top: 1rem; height: 800px;">
                <iframe
                    title="ProyectoBD_Localidad"
                    aria-label="Visualización por localidad en Power BI"
                    width="100%"
                    height="100%"
                    src="https://app.powerbi.com/view?r=eyJrIjoiMGM2Y2U0MGEtMTFlNy00OTc1LWI2NjYtODViOTU4MDE5ZGU4IiwidCI6IjA3ZGE2N2EwLTFmNDMtNGU4Yy05NzdmLTVmODhiNjQ3MGVlNiIsImMiOjR9"
                    frameborder="0"
                    allowFullScreen="true"
                ></iframe>
            </section>
        </main>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="./js/menu.js"></script>
    <script src="./js/main.js"></script>

    <script>
        const contextoProblema = document.querySelector("#contexto-problema");
        const dashboard = document.querySelector("#contenedor-productos");
        const simulacionContainer = document.querySelector("#simulacion-container");
        const powerbi1 = document.querySelector("#powerbi-container");
        const powerbiFecha = document.querySelector("#powerbi-fecha-container");
        const powerbiLocalidad = document.querySelector("#powerbi-localidad-container");

        // Función para ocultar todas las secciones
        function ocultarTodasSecciones() {
            contextoProblema.style.display = "none";
            dashboard.style.display = "none";
            simulacionContainer.style.display = "none";
            powerbi1.style.display = "none";
            powerbiFecha.style.display = "none";
            powerbiLocalidad.style.display = "none";
        }

        // Función para remover clase active de todos los botones
        function removerClaseActive() {
            document.querySelectorAll('.boton-categoria').forEach(btn => {
                btn.classList.remove('active');
            });
        }

        document.querySelector("#btn-dashboard").addEventListener("click", () => {
            ocultarTodasSecciones();
            removerClaseActive();
            contextoProblema.style.display = "block";
            dashboard.style.display = "grid";
            document.querySelector("#btn-dashboard").classList.add('active');
            document.querySelector("#titulo-principal").innerText = "Dashboard";
        });

        document.querySelector("#btn-simulacion").addEventListener("click", () => {
            ocultarTodasSecciones();
            removerClaseActive();
            simulacionContainer.style.display = "block";
            document.querySelector("#btn-simulacion").classList.add('active');
            document.querySelector("#titulo-principal").innerText = "Simulación Unity - Tráfico Bogotá";
        });

        document.querySelector("#btn-powerbi").addEventListener("click", () => {
            ocultarTodasSecciones();
            removerClaseActive();
            powerbi1.style.display = "block";
            document.querySelector("#btn-powerbi").classList.add('active');
            document.querySelector("#titulo-principal").innerText = "Power BI por Tipo de Accidente";
        });

        document.querySelector("#btn-powerbi-fecha").addEventListener("click", () => {
            ocultarTodasSecciones();
            removerClaseActive();
            powerbiFecha.style.display = "block";
            document.querySelector("#btn-powerbi-fecha").classList.add('active');
            document.querySelector("#titulo-principal").innerText = "Power BI por Fecha";
        });

        document.querySelector("#btn-powerbi-localidad").addEventListener("click", () => {
            ocultarTodasSecciones();
            removerClaseActive();
            powerbiLocalidad.style.display = "block";
            document.querySelector("#btn-powerbi-localidad").classList.add('active');
            document.querySelector("#titulo-principal").innerText = "Power BI por Localidad";
        });
    </script>
</body>
</html>